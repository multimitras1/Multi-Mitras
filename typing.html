<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Speed Test</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff8e7;
    margin: 0;
    padding: 0;
    color: #333;
  }
  .container {
    max-width: 900px;
    margin: 40px auto;
    background: #fff4d1;
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  }
  h1 {
    text-align: center;
    color: #e69500;
    margin-bottom: 10px;
  }
  .controls {
    text-align: center;
    margin-bottom: 20px;
  }
  select, button {
    padding: 10px 16px;
    margin: 5px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  select {
    background: #fff;
    border: 2px solid #f0c75e;
    color: #333;
  }
  button {
    background: #ffb703;
    color: white;
    transition: 0.2s;
  }
  button:hover {
    background: #fb8500;
  }
  .paragraph-box {
    background: #fff;
    padding: 18px;
    border-radius: 10px;
    border: 2px solid #f0c75e;
    min-height: 120px;
    margin-bottom: 15px;
  }
  #paragraph {
    font-size: 1.1rem;
    line-height: 1.7;
    color: #222;
  }
  textarea {
    width: 100%;
    height: 120px;
    border-radius: 10px;
    border: 2px solid #f0c75e;
    padding: 12px;
    font-size: 1rem;
    resize: none;
    outline: none;
  }
  .stats {
    margin-top: 20px;
    display: flex;
    justify-content: space-around;
    text-align: center;
  }
  .stat {
    background: #fff4d1;
    padding: 12px;
    border-radius: 10px;
    flex: 1;
    margin: 5px;
    font-size: 1.1rem;
    font-weight: bold;
    color: #444;
  }
</style>
</head>
<body>
<div class="container">
  <h1>Typing Speed Test</h1>
  <div class="controls">
    <label for="timeSelect">Select Duration: </label>
    <select id="timeSelect">
      <option value="60">1 Minute</option>
      <option value="180">3 Minutes</option>
      <option value="300">5 Minutes</option>
    </select>
    <button onclick="startTest()">Start Test</button>
  </div>

  <div class="paragraph-box">
    <p id="paragraph">Click "Start Test" to begin.</p>
  </div>
  <textarea id="inputBox" placeholder="Start typing here..." disabled></textarea>

  <div class="stats">
    <div class="stat">Time: <span id="time">0</span>s</div>
    <div class="stat">WPM: <span id="wpm">0</span></div>
    <div class="stat">Accuracy: <span id="accuracy">0%</span></div>
  </div>
</div>

<script>
const paragraphs = [
  "Typing fast is a useful skill in the digital age where communication is instant.",
  "Practicing every day can significantly increase both your speed and accuracy.",
  "Accuracy matters more than speed because errors reduce real typing efficiency.",
  "Most typing masters focus on posture, finger placement, and consistency.",
  "Online typing tests are fun and also track your progress over time.",
  "Typing without looking at the keyboard is called touch typing.",
  "The world record for typing speed is over 200 words per minute.",
  "With patience and dedication, anyone can improve typing speed easily.",
  "Typing skills are essential for students, professionals, and programmers alike.",
  "A relaxed mind and correct posture lead to better typing results.",
  "Focus on accuracy first; speed will come naturally with practice.",
  "Avoid unnecessary finger movements to increase efficiency and flow.",
  "Consistent practice builds muscle memory, which boosts typing performance.",
  "Challenge yourself by typing paragraphs of varying difficulty levels.",
  "Learning shortcuts and hotkeys also complements typing practice.",
  "Typing games are a fun way to learn and enjoy the process.",
  "Always maintain a comfortable typing environment for long practice sessions.",
  "Track your words per minute to monitor improvement over time.",
  "Typing fluency can save hours of work in the long run.",
  "Remember, small daily improvements lead to long-term mastery."
];

let timer;
let timeLeft = 0;
let totalTime = 0;
let isRunning = false;

let currentParagraph = "";
let correctChars = 0;
let totalTyped = 0;

const timeEl = document.getElementById("time");
const wpmEl = document.getElementById("wpm");
const accuracyEl = document.getElementById("accuracy");
const inputBox = document.getElementById("inputBox");
const paragraphEl = document.getElementById("paragraph");

function startTest() {
  clearInterval(timer);
  correctChars = 0;
  totalTyped = 0;

  totalTime = parseInt(document.getElementById("timeSelect").value);
  timeLeft = totalTime;
  timeEl.textContent = timeLeft;

  currentParagraph = getRandomParagraphs(20);
  paragraphEl.textContent = currentParagraph;

  inputBox.value = "";
  inputBox.disabled = false;
  inputBox.focus();

  isRunning = true;

  timer = setInterval(() => {
    timeLeft--;
    timeEl.textContent = timeLeft;

    if (timeLeft <= 0) {
      endTest();
    }
  }, 1000);
}

function endTest() {
  clearInterval(timer);
  inputBox.disabled = true;
  isRunning = false;

  let words = correctChars / 5;
  let wpm = Math.round(words / (totalTime / 60));
  let accuracy = totalTyped > 0 ? Math.round((correctChars / totalTyped) * 100) : 0;

  wpmEl.textContent = wpm;
  accuracyEl.textContent = accuracy + "%";
}

inputBox.addEventListener("input", () => {
  if (!isRunning) return;

  let typed = inputBox.value;
  totalTyped++;

  if (typed[typed.length - 1] === currentParagraph[typed.length - 1]) {
    correctChars++;
  }

  let words = correctChars / 5;
  let elapsed = totalTime - timeLeft;
  let wpm = elapsed > 0 ? Math.round(words / (elapsed / 60)) : 0;
  let accuracy = Math.round((correctChars / totalTyped) * 100);

  wpmEl.textContent = wpm;
  accuracyEl.textContent = accuracy + "%";
});

function getRandomParagraphs(n) {
  let result = [];
  let copy = [...paragraphs];
  for (let i = 0; i < n; i++) {
    let idx = Math.floor(Math.random() * copy.length);
    result.push(copy[idx]);
    copy.splice(idx, 1);
    if (copy.length === 0) copy = [...paragraphs];
  }
  return result.join(" ");
}
</script>
</body>
</html>
